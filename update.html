<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="main.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <title>Document</title>
    <script>
        $(document).ready(function () {
            const searchParams = new URLSearchParams(location.search);
            const bno = searchParams.get('bno');
            if (bno == null) {
                location.href = 'list.html';
            }
            $.ajax({
                url: 'http://192.168.0.177:8081/board/read?bno=' + bno,
                success: function (result) {
                    $('#title').val(result.title);
                    $('#content').val(result.content);
                    $('#password').val(result.password);
                },
                error(response) {
                    alert(response.responseText);
                    location.href = 'list.html'

                }
            })
        })
        $('#update').on('click',function(e){
            e.preventDefault();
            const params = {
                bno : bno,
                title : $('#title').val(),
                content : $('#content').val(),
                password : $('#password').val()
            }
            $.ajax({
                url:'http://192.168.0.177:8081/board/update',
                method:'post',
                data: params,
                success:function(){
                    location.href='list.html'
                }

            })
        })
    </script>
</head>

<body>
    <form id="frm">
        <input type="text" name="bno" id="bno">
        <input type="text" name="title" id="title">
        <input type="text" name="content" id="content">
        <input type="text" name="password" id="password">
        <button id="update">변경</button>
    </form>
</body>

</html>